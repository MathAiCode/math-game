<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>لعبة مطابقة السؤال بالإجابة – سحب وإفلات</title>
  <style>
    body { margin:0; font-family: "Noto Naskh Arabic", Arial, sans-serif; background:#0f172a; display:flex; justify-content:center; align-items:center; height:100vh; }
    .phone { width:min(100vw,420px); aspect-ratio:9/16; background:#f8fafc; border-radius:20px; overflow:hidden; box-shadow:0 8px 30px rgba(0,0,0,.4); display:flex; flex-direction:column; }
    header { background:#0ea5e9; color:#fff; padding:12px; text-align:center; font-weight:700; display:flex; flex-direction:column; align-items:center; gap:4px; font-size:14px; line-height:1.4; }
    header .subtitle { font-size:13px; font-weight:600; color:#e0f2fe; }
    .board { flex:1; display:flex; gap:10px; padding:12px; }
    .col { flex:1; display:flex; flex-direction:column; gap:8px; }
    .card { background:#fff; border:2px solid #e2e8f0; border-radius:10px; padding:8px; text-align:center; font-size:15px; font-weight:700; cursor:grab; }
    .card.dragging { opacity:0.6; }
    .card.drop-target { border-color:#3b82f6; background:#eff6ff; }
    .matched { background:#dcfce7 !important; border-color:#16a34a !important; color:#065f46; }
    .score { padding:6px; text-align:center; font-size:14px; font-weight:bold; background:#f1f5f9; }
    #finish { display:none; text-align:center; padding:16px; }
    #finish.show { display:block; }
    button { margin-top:10px; padding:8px 12px; border:none; border-radius:8px; background:#0ea5e9; color:#fff; font-weight:700; cursor:pointer; }
  </style>
</head>
<body>
  <div class="phone">
    <header>
      أسرة مادة الرياضيات بمدرسة الفاروق للتعليم الأساسي – تعليمية البريمي
      <div class="subtitle">التقريب للصف الثامن – طابق البطاقات</div>
    </header>

    <div class="score">النقاط: <span id="score">٠</span></div>

    <div class="board">
      <div id="questionsCol" class="col" aria-label="أسئلة"></div>
      <div id="answersCol" class="col" aria-label="إجابات"></div>
    </div>

    <div id="finish">
      <h2>🎉 أحسنت!</h2>
      <p>أنهيت جميع الأزواج. مجموع نقاطك: <span id="finalScore">٠</span></p>
      <button onclick="startGame()">إعادة اللعب</button>
    </div>
  </div>

  <script>
    const ALL_PAIRS = [
      { id: 1, q: 'قرّب العدد ٢٥٫٦٨ إلى منزلتين عشريتين', a: '٢٥٫٦٨' },
      { id: 2, q: 'قرّب العدد ٣٫١٤١٥ إلى منزلتين عشريتين', a: '٣٫١٤' },
      { id: 3, q: 'عبّر عن ٠٫٠٠٤٥٢ برقمين معنويين', a: '٠٫٠٠٤٥' },
      { id: 4, q: 'قرّب العدد ١٨٫٣٧٤ إلى ٣ أرقام معنوية', a: '١٨٫٤' },
      { id: 5, q: 'عبّر عن ٦٥٧٩ برقمين معنويين', a: '٦٦٠٠' },
      { id: 6, q: 'قرّب العدد ٠٫٩٩٩٥ إلى ٣ منازل عشرية', a: '١٫٠٠٠' },
    ];

    let score = 0;
    const scoreEl = document.getElementById('score');
    const finalScoreEl = document.getElementById('finalScore');
    const finishEl = document.getElementById('finish');

    function toHindi(n){
      const map = ['٠','١','٢','٣','٤','٥','٦','٧','٨','٩'];
      return String(n).split('').map(ch => /[0-9]/.test(ch) ? map[+ch] : ch).join('');
    }

    function shuffle(arr){
      return arr.map(x => [Math.random(),x]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);
    }

    function startGame(){
      score = 0;
      scoreEl.textContent = '٠';
      finishEl.classList.remove('show');
      const qCol = document.getElementById('questionsCol');
      const aCol = document.getElementById('answersCol');
      qCol.innerHTML = '';
      aCol.innerHTML = '';

      const questions = ALL_PAIRS;
      const answers = shuffle(ALL_PAIRS);

      questions.forEach(p=>{
        const card = document.createElement('div');
        card.className = 'card';
        card.textContent = p.q;
        card.dataset.id = p.id;
        card.draggable = true;
        card.addEventListener('dragstart', onDragStart);
        qCol.appendChild(card);
      });

      answers.forEach(p=>{
        const card = document.createElement('div');
        card.className = 'card';
        card.textContent = p.a;
        card.dataset.id = p.id;
        card.addEventListener('dragover', onDragOver);
        card.addEventListener('dragleave', onDragLeave);
        card.addEventListener('drop', onDrop);
        aCol.appendChild(card);
      });
    }

    function onDragStart(e){
      e.dataTransfer.setData('text/plain', e.target.dataset.id);
      e.target.classList.add('dragging');
    }

    function onDragOver(e){
      e.preventDefault();
      e.currentTarget.classList.add('drop-target');
    }

    function onDragLeave(e){
      e.currentTarget.classList.remove('drop-target');
    }

    function onDrop(e){
      e.preventDefault();
      const qId = e.dataTransfer.getData('text/plain');
      const aId = e.currentTarget.dataset.id;
      e.currentTarget.classList.remove('drop-target');
      const dragging = document.querySelector('.dragging');
      if (dragging) dragging.classList.remove('dragging');

      if(qId === aId){
        e.currentTarget.classList.add('matched');
        const qCard = document.querySelector('.card[draggable][data-id="'+qId+'"]');
        qCard.classList.add('matched');
        score++;
        scoreEl.textContent = toHindi(score);
        if(score === ALL_PAIRS.length){
          finalScoreEl.textContent = toHindi(score);
          finishEl.classList.add('show');
        }
      } else {
        e.currentTarget.style.background = '#fee2e2';
        setTimeout(()=>{ e.currentTarget.style.background = '#fff'; },500);
      }
    }

    startGame();
  </script>
</body>
</html>